<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Slash Reading - Settings</title>
  <link rel="stylesheet" href="styles/options.css">
</head>
<body>
  <div class="container">
    <h1>スラッシュリーディング 設定</h1>

    <div class="section">
      <h2>OpenAI 設定</h2>

      <div class="form-group">
        <label for="api-key">APIキー *</label>
        <input type="password" id="api-key" placeholder="sk-..." required>
        <small><a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a> でAPIキーを取得してください</small>
      </div>

      <div class="form-group">
        <label for="model">AIモデル</label>
        <select id="model">
          <option value="gpt-4o-mini">GPT-4o Mini (推奨)</option>
          <option value="gpt-4o">GPT-4o</option>
          <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
        </select>
        <input type="text" id="custom-model" placeholder="カスタムモデル名を入力" style="margin-top: 8px;">
      </div>

      <div class="form-group">
        <label for="max-tokens">バッチあたりの最大トークン数</label>
        <input type="number" id="max-tokens" min="100" max="4000" value="1000">
        <small>1回のAPI呼び出しで処理する最大トークン数</small>
      </div>
    </div>

    <div class="section">
      <h2>読解レベル設定</h2>

      <div class="form-group">
        <label for="cefr-level">CEFRレベル（プリセット）</label>
        <select id="cefr-level">
          <option value="A1">A1 - 基礎 (英検3級程度)</option>
          <option value="A2">A2 - 初級 (英検準2級程度)</option>
          <option value="B1">B1 - 中級 (英検2級程度) 推奨</option>
          <option value="B2">B2 - 中上級 (英検準1級程度)</option>
          <option value="custom">カスタム設定</option>
        </select>
        <small>レベルを選択すると、推奨単語数が自動設定されます</small>
      </div>

      <div class="form-group">
        <label for="min-words">最小単語数（1チャンクあたり）</label>
        <select id="min-words">
          <option value="2">2語</option>
          <option value="3">3語</option>
          <option value="4" selected>4語</option>
          <option value="5">5語</option>
          <option value="6">6語</option>
          <option value="7">7語</option>
          <option value="8">8語</option>
        </select>
        <small>各チャンクの最小単語数</small>
      </div>

      <div class="form-group">
        <label for="max-words">最大単語数（1チャンクあたり）</label>
        <select id="max-words">
          <option value="3">3語</option>
          <option value="4">4語</option>
          <option value="5">5語</option>
          <option value="6" selected>6語</option>
          <option value="7">7語</option>
          <option value="8">8語</option>
          <option value="9">9語</option>
          <option value="10">10語</option>
        </select>
        <small>各チャンクの最大単語数</small>
      </div>

      <div class="form-group">
        <small>
          <strong>レベル別推奨設定:</strong><br>
          • <b>A1</b>: 最小2語、最大3語（短い区切り）<br>
          • <b>A2</b>: 最小3語、最大4語（基本フレーズ）<br>
          • <b>B1</b>: 最小4語、最大6語（意味のまとまり）<br>
          • <b>B2</b>: 最小5語、最大8語（長めの句）
        </small>
      </div>
    </div>

    <div class="section">
      <h2>表示設定</h2>

      <div class="form-group">
        <label for="slash-color">スラッシュの色</label>
        <div class="color-input-group">
          <input type="color" id="slash-color" value="#0066cc">
          <input type="text" id="slash-color-text" value="#0066cc" placeholder="#0066cc">
        </div>
      </div>

      <div class="form-group">
        <label for="display-method">表示方法</label>
        <select id="display-method">
          <option value="css">CSS疑似要素 (非破壊的)</option>
          <option value="text">実際の「/」文字を挿入</option>
        </select>
      </div>
    </div>

    <div class="section">
      <h2>処理設定</h2>

      <div class="form-group">
        <label for="target-selector">対象セレクタ</label>
        <input type="text" id="target-selector" placeholder="p, div, span (空の場合は全て)">
        <small>処理する要素のCSSセレクタ</small>
      </div>

      <div class="form-group">
        <label for="exclude-selector">除外セレクタ</label>
        <input type="text" id="exclude-selector" value="script, style, code, pre, a" placeholder="script, style, code, pre, a">
        <small>処理をスキップする要素のCSSセレクタ</small>
      </div>

      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" id="dynamic-monitoring">
          <span>動的なページ変更を監視</span>
        </label>
        <small>ページに追加された新しいコンテンツを自動的に処理</small>
      </div>
    </div>

    <div class="section">
      <h2>キャッシュ設定</h2>

      <div class="form-group">
        <button id="clear-cache" class="btn btn-secondary">キャッシュをクリア</button>
        <span id="cache-size"></span>
      </div>
    </div>

    <div class="button-group">
      <button id="save" class="btn btn-primary">設定を保存</button>
      <button id="reset" class="btn btn-secondary">デフォルトに戻す</button>
    </div>

    <div id="status" class="status" style="display: none;"></div>
  </div>

  <script src="options.js"></script>
</body>
</html>